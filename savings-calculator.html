<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Savings Calculators</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Lexend Deca", serif;
        }
        #cash-savings-calculator-section {
            margin: 0 auto;
            display: flex;
            justify-content: center;

            @media screen and (min-width: 768px) {
                padding: 1rem;
            }

            .main-container {
                @media screen and (min-width: 768px) {
                    display: flex;
                    justify-content: space-around;
                    align-items: center;
                    width: 100%;
                    
                }
            }

            .layout {
                @media screen and (min-width: 768px) {
                    max-width: 623px;
                }
            }

            .title {
                font-size: 30px;
                font-weight: 700;
                line-height: 37.5px;
                max-width: 675px;
                padding: 0 1rem;
            }

            .subtitle {
                font-size: 16px;
                font-weight: 400;
                line-height: 24px;
                margin: 1.5rem auto;
                width: 100%;
                max-width: 675px;
                padding: 0 1rem;
            }

            .calculator-container {
                /* Update with dynamic variable */
                max-width: 1280px;
                /* Update with dynamic variable */
                border-radius: 10px;
            }

            .calculator-form {
                display: flex;
                flex-direction: column;
                justify-content: center;
                max-width: 675px;
                /* Update with dynamic variable */
                background: #e6e6e6;
                /* Update with dynamic variable */
                margin: 0 auto;
                padding: 1rem;
                border-radius: 20px;

                @media screen and (min-width: 768px) {
                    background-color: transparent;
                }
            }
            
            .input-container {
                @media screen and (min-width: 768px) {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    width: 100%;
                }
            }

            .input-title-container {
                margin-top: 2rem;
            }

            .input-title {
                /* Update with dynamic variable */
                color: var(--primary-dark-teal, #043436);
                /* Update with dynamic variable */

                font-family: Lexend Deca;
                font-size: 16px;

                /* Update with dynamic variable */
                font-weight: 500;
                /* Update with dynamic variable */

                line-height: 22.4px;
                width: 100%;
                margin-bottom: .6rem;
            }

            .input-subtitle {
                font-size: 12px;
                padding-bottom: 1rem;
                opacity: .6;
            }

            .input {
                display: flex;
                align-items: center;
                border-radius: 50px;


                /* Update with dynamic variable = $borderDefault*/
                border: 1px solid #757575;
                /* Update with dynamic variable */

                /* Update with dynamic variable = --primary-white*/
                background: var(--primary-white, #FFF);
                /* Update with dynamic variable */

                height: 55px;
                width: 100%;
                color: #777777;

                @media screen and (min-width: 768px) {
                    max-width: 175px;
                }

                .dollar-sign {
                    font-size: 14px;
                    max-width: 50px;
                    width: 100%;
                    text-align: center;
                    padding-left: 10px;

                    @media screen and (min-width: 768px) {
                        max-width: 30px;
                    }
                }

                .vertical-line {
                    border-left: 1px solid gray;
                    height: 100%;
                }

                .slider-container {
                    width: 100%;
                    padding: .5rem 0;
                    display: none;

                    @media screen and (min-width: 768px) {
                        display: block;
                    }
                }

                .user-input {
                    border: none;
                    outline: none;
                    background-color: transparent;
                    font-family: inherit;
                    font-size: inherit;
                    padding: 5px 1rem;
                    width: 100%;
                }

                &:focus-within {
                    border-color: #177d78; 
                    box-shadow: 0 0 5px rgba(23, 125, 120, 0.5); 
                }
            }

            .slider-container {
                width: 100%;
                padding: .5rem 0;
                display: none;

                @media screen and (min-width: 768px) {
                    display: block;
                }
            }

            .label-input {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                font-size: 12px;
            }

            #min-savings-balance,
            #max-savings-balance {
                position: relative;
                font-weight: 400;
                z-index: 1;
                padding: 0 .5rem;
                font-size: 16px;
                opacity: .7;
            }
            input[type="range"] {
                -webkit-appearance: none;
                appearance: none;
                width: 100%;
                height: 9px;
                border-radius: 5px;
                outline: none;
                background: linear-gradient(to right, #177D78 0%, #177D78 50%, #AEB0B5 50%, #AEB0B5 100%);
                transition: opacity 0.2s;
            }

            input[type="range"]::-webkit-slider-thumb {
                width: 100%;
                -webkit-appearance: none;
                appearance: none;
                width: 50px;
                height: 50px;
                background-color: #177D78;
                border-radius: 50%;
                cursor: pointer;
                position: relative;
                z-index: 2;
            }

            input[type="range"]::-moz-range-thumb {
                width: 50px;
                height: 50px;
                background-color: #177D78;
                border: 2px solid #b4fff0;
                border-radius: 50%;
                cursor: pointer;
            }

            input[type="range"]:hover::-webkit-slider-thumb {
                border: 2px solid #b4fff0;
                opacity: 1;
            }

            input[type="range"]:hover::-moz-range-thumb {
                border: 2px solid #b4fff0;
                opacity: 1;
            }

            input[type="range"]:focus::-webkit-slider-thumb {
                border: 2px solid #b4fff0;
                opacity: 1;
            }

            input[type="range"]:focus::-moz-range-thumb {
                border: 2px solid #b4fff0;
                opacity: 1;
            }

            .answer-container {
                @media screen and (min-width: 768px) {
                    padding: 0 2rem;
                }
            }

            .answer-text-desktop {
                width: 100%;
                font-size: 16px;
                line-height: 24px;
                font-weight: 500;
                display: none;
                max-width: 548px;

                @media screen and (min-width: 768px) {
                    display: block;
                }
            }

            .answer-text-mobile {
                width: 100%;
                font-size: 12px;
                line-height: 16px;
                /* margin-top: 2rem; */
                font-weight: 500;
                padding: 2rem 0 .5rem 0;
                
                @media screen and (min-width: 768px) {
                    display: none;
                }
            }

            .answer-start {
                color: #000000;
                opacity: .6;
            }

            .savings-calculator-answer {
                color: #043436;
                font-weight: 700;
                font-size: 45px;
                line-height: 0px;
                margin: 2rem 0 3rem 0;

                @media screen and (min-width: 768px) {
                    font-size: 70px;
                    margin: 2.5rem 0 5rem 0;

                }
            }

            .answer-month {
                color: #043436;
                font-weight: 700;
                font-size: 16px;
                line-height: 0px;

                @media screen and (min-width: 768px) {
                    font-size: 32px;
                }

            }

            .answer-final-text {
                color: #777777;
                font-weight: 400;

                @media screen and (min-width: 768px) {
                    margin: 2rem 0 3rem 0;
                }
            }

            .reset-container {
                display: flex;
                align-items: center;
                cursor: pointer;
                margin: 1rem auto;
                padding: 0 .5rem;

                @media screen and (min-width: 768px) {
                    justify-content: flex-end;
                }

                .button-container {
                    display: flex;
                    align-items: center;
                    justify-content: flex-end;
                }



                .reset-icon {
                    margin-right: .3rem;
                    margin-top: .3rem;
                }

                .reset-button {
                    border: none;
                    outline: none;
                    background-color: transparent;
                    font-size: 14px;
                    color: #043436;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                }

                .reset-button:hover {
                    cursor: pointer;
                    text-decoration: underline;
                }

                .reset-button:focus {
                    text-decoration: underline;
                }
            }

            .horizontal-line-desktop {
                margin-top: 2rem;
                opacity: .6;
                display: none;

                @media screen and (min-width: 768px) {
                    display: block;
                }
            }

            .disclosures-container {
                @media screen and (min-width: 768px) {
                    background-color: gainsboro;
                    padding: 1rem;
                }

                .disclosures {
                    padding: 0 .5rem;
                    font-size: 12px;
                    line-height: 16px;
                    opacity: .6;
                    width: 100%;

                    @media screen and (min-width: 768px) {
                        max-width: 498px;
                        line-height: 22.4px;

                    }
                }
            }

            .cta-container {
                text-align: center;
                margin: 2rem auto;
                width: 100%;

                @media screen and (min-width: 768px) {
                    margin: 0;
                    height: 15px;
                }

                .cta {
                    border: none;
                    background-color: #b4fff0;
                    border-radius: 50px;
                    width: 150px;
                    height: 45px;
                    color: #043436;
                    font-size: 14px;
                    line-height: 24px;
                    font-weight: 500;

                    @media screen and (min-width: 768px) {
                        position: relative;
                        top: .5rem;

                    }
                }
            }
        }



    </style>
</head>
<body>
    <section id="cash-savings-calculator-section">
        <div class="main-container">
            <div class="layout">
                <h2 class="title">Calculate Your Savings</h2>
                <p class="subtitle">You could save when you transfer your balance to our Classic Card and enjoy our promotional rate. Since we have no PSECU balance transfer fee or annual fee, the savings stay with you!</p>
                <div class="calculator-container">
                    <div class="calculator-form">
                        <div class="input-container">
                            <div class="input-title">What is the balance on your current credit card?</div>
                            <div class="input">
                                <div class="dollar-sign">$</div>
                                <div class="vertical-line"></div>
                                <!-- <label for="cash-amount" class="sr-only">Cash Rewards Calculator Input</label> -->
                                <input class="user-input" type="text" id="cash-amount" placeholder="Enter amount" value="15000" min="1" step="1000" required />
                            </div>
                        </div>
                        <div class="slider-container">
                            <div class="label-input">
                                <div id="min-savings-balance">$3</div>
                                <input label="current balance slider" type="range" id="current-balance-slider" min="3" max="300000" value="15000" />
                                <div id="max-savings-balance">$300,000</div>
                            </div>
                        </div>
                        <div class="input-container">
                            <div class="input-title-container">
                                <!-- input field from module below -->
                                <div class="input-title">What is the interest rate on your current card?</div>
                                <!-- input field from module above-->
                                <div class="input-subtitle">The average credit card APR in the United States is 20.56%.
                                </div>
                            </div>
                            <div class="input">
                                <div class="dollar-sign">%</div>
                                <div class="vertical-line"></div>
                                <!-- <label for="cash-amount" class="sr-only">Cash Rewards Calculator Input</label> -->
                                <input class="user-input" type="text" id="percent-amount" placeholder="Enter amount"
                                    value="20.56" min="1" required />
                            </div>
                        </div>
                        <div class="slider-container">
                            <div class="label-input apr-label">
                                <div id="min-savings-balance">4.91%</div>
                                <input label="credit card apr slider" type="range" id="credit-card-apr" min="4.91"
                                    max="30" value="20.56" step="0.01" />
                                <div id="max-savings-balance">30%</div>
                            </div>
                        </div>
                        <div class="answer-text-mobile">
                            <p class="answer-start">You could save an average of</p>
                            <p class="savings-calculator-answer">$53,380.13</p>
                            <p class="answer-final-text"><span class="answer-month">per month </span> when you transfer
                                your balance to our Classic Card and enjoy our promotional rate. Since we have no PSECU
                                balance transfer fee or annual fee, the savings stay with you</p>
                        </div>
                    </div>
                </div>
                <hr class="horizontal-line-desktop" />
                <div class="reset-container">
                    <div class="button-container">
                        <button class="reset-button">
                            <span class="reset-icon"><svg width="15" height="15" viewBox="0 0 20 19" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M17.7344 10.7891C18.2422 10.9453 18.5156 11.4531 18.3594 11.9609C17.2656 15.6719 13.8281 18.25 9.96094 18.25C6.875 18.25 4.02344 16.5703 2.46094 13.9531V17.9375C2.46094 18.4844 2.07031 18.875 1.52344 18.875C1.01562 18.875 0.585938 18.4844 0.585938 17.9375V11.6875C0.585938 11.1797 1.01562 10.75 1.52344 10.75H7.77344C8.32031 10.75 8.71094 11.1797 8.71094 11.6875C8.71094 12.2344 8.28125 12.625 7.77344 12.625H3.82812C5 14.8906 7.34375 16.375 9.96094 16.375C13.0078 16.375 15.7422 14.3438 16.5625 11.4141C16.7188 10.9062 17.2266 10.6328 17.7344 10.7891ZM18.4375 0.125C18.9453 0.125 19.375 0.554688 19.375 1.0625V7.3125C19.375 7.85938 18.9453 8.25 18.4375 8.25H12.1875C11.6406 8.25 11.25 7.85938 11.25 7.3125C11.25 6.80469 11.6406 6.375 12.1875 6.375H16.0938C14.9219 4.14844 12.5781 2.625 10 2.625C6.95312 2.625 4.21875 4.69531 3.35938 7.58594C3.24219 8.09375 2.73438 8.36719 2.22656 8.21094C1.71875 8.09375 1.44531 7.54688 1.5625 7.07812C2.65625 3.36719 6.13281 0.75 10 0.75C13.0859 0.75 15.9375 2.46875 17.5 5.08594V1.0625C17.5 0.554688 17.8906 0.125 18.4375 0.125Z"
                                        fill="#757575" />
                                </svg>
                            </span>
                            Start Over
                        </button>
                    </div>
                </div>
            </div>
            <div class="answer-container">
                <div class="answer-text-desktop">
                    <p class="answer-start">You could save an average of</p>
                    <p class="savings-calculator-answer">$53,380.13</p>
                    <p class="answer-final-text"><span class="answer-month">per month </span> when you transfer your
                        balance to our Classic Card and enjoy our promotional rate. Since we have no PSECU balance
                        transfer fee or annual fee, the savings stay with you</p>
                </div>
                <div class="disclosures-container">
                    <p class="disclosures"> 1This estimate is provided for informational purposes only. Your actual avings may vary.</p>
                    <div class="cta-container">
                        <button class="cta">Apply Today</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        const cashInput = document.getElementById('cash-amount');
        const percentInput = document.getElementById('percent-amount');
        const answer = document.querySelectorAll('.savings-calculator-answer');
        const resetButton = document.querySelector('.reset-container');
        const currentBalanceSlider = document.querySelector('#current-balance-slider');
        const creditCardAprSlider = document.querySelector('#credit-card-apr');

        // Setting original values
        const originalCashValue = cashInput.value;
        const originalPercentValue = percentInput.value;
        const originalSliderValue = currentBalanceSlider.value;
        const originalCreditCardAprValue = creditCardAprSlider.value;

        // Max values for inputs and sliders
        const maxCashValue = 300000;
        const maxPercentValue = 30;

        // Variables for calculation
        const promoRate = 4.90;
        let cashAmount = originalCashValue;
        let percentageAmount = originalPercentValue;

        // Setting max values for inputs
        // Adding commas to inputs
        const enforceNumericInput = (input, maxValue) => {
            input.addEventListener('input', function () {
                const cursorPosition = input.selectionStart;
                 // Remove commas
                let numericValue = input.value.replace(/,/g, '');
                // Remove non-digit characters
                numericValue = numericValue.replace(/\D/g, ''); 

                // Enforce maximum value
                if (numericValue && parseInt(numericValue, 10) > maxValue) {
                    numericValue = maxValue.toString();
                }

                // Format value with commas
                input.value = numericValue ? parseInt(numericValue, 10).toLocaleString() : '';
                // Preserve cursor position
                input.setSelectionRange(cursorPosition, cursorPosition); 
            });
        };

        enforceNumericInput(cashInput, maxCashValue);
        enforceNumericInput(percentInput, maxPercentValue);

        const removeCommaFromInputCalculator = (value) => parseInt(value.replace(/,/g, ""), 10) || 0;

        const calculation = (cashValue, percentValue, currentPromoRate) => {
            const numericCash = removeCommaFromInputCalculator(cashValue);
            const promoRateDecimal = currentPromoRate / 100;
            const percentDecimal = percentValue / 100;
            const monthlyDifference = (percentDecimal - promoRateDecimal) / 12;
            return (numericCash * monthlyDifference).toFixed(2);
        };

        const adjustSliderBackground = (slider, isPercent) => {
            const sliderValue = isPercent
                ? ((slider.value - slider.min) / (slider.max - slider.min)) * 100
                : (slider.value / slider.max) * 100;
            slider.style.background = `linear-gradient(to right, #177D78 0%, #177D78 ${sliderValue}%, #AEB0B5 ${sliderValue}%, #AEB0B5 100%)`;
        };

        const updateAnswer = () => {
            answer.forEach(ans => {
                ans.textContent = `$${parseFloat(calculation(cashAmount, percentageAmount, promoRate), 10).toLocaleString()}`;
            });
        };

        cashInput.addEventListener('input', () => {
            // adjusting both the input and slider values
            cashAmount = cashInput.value;
            currentBalanceSlider.value = removeCommaFromInputCalculator(cashAmount);
            adjustSliderBackground(currentBalanceSlider);
            updateAnswer();
        });

        currentBalanceSlider.addEventListener('input', () => {
            // adjusting both the input and slider values
            cashAmount = currentBalanceSlider.value;
            cashInput.value = parseInt(cashAmount, 10).toLocaleString(); // Ensure commas are added
            adjustSliderBackground(currentBalanceSlider);
            updateAnswer();
        });

        percentInput.addEventListener('input', () => {
            // adjusting both the input and slider values
            percentageAmount = percentInput.value;
            creditCardAprSlider.value = percentageAmount;
            adjustSliderBackground(creditCardAprSlider, true);
            updateAnswer();
        });

        creditCardAprSlider.addEventListener('input', () => {
            // adjusting both the input and slider values
            percentageAmount = creditCardAprSlider.value;
            percentInput.value = percentageAmount;
            adjustSliderBackground(creditCardAprSlider, true);
            updateAnswer();
        });

        resetButton.addEventListener('click', () => {
            cashInput.value = originalCashValue;
            percentInput.value = originalPercentValue;
            currentBalanceSlider.value = originalSliderValue;
            creditCardAprSlider.value = originalCreditCardAprValue;
            cashAmount = originalCashValue;
            percentageAmount = originalPercentValue;
            updateAnswer();
            adjustSliderBackground(currentBalanceSlider);
            adjustSliderBackground(creditCardAprSlider, true);
        });

        updateAnswer();
        adjustSliderBackground(currentBalanceSlider);
        adjustSliderBackground(creditCardAprSlider, true);


        document.addEventListener('DOMContentLoaded', () => {
            cashInput.value = parseInt(cashInput.value || 0, 10).toLocaleString(); // Format with commas
            percentInput.value = parseInt(percentInput.value || 0, 10).toLocaleString(); // Format if necessary
            adjustSliderBackground(currentBalanceSlider);
            adjustSliderBackground(creditCardAprSlider, true);
            currentBalanceSlider.step = 500;
            creditCardAprSlider.step = .5;

            answer.forEach(ans => {
                ans.textContent = `$${insertCommaIntoInputCalculator(calculation(cashAmount, percentageAmount, promoRate))}`;
            });
        });

    </script>
</body>
</html>