<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cash Reward Calculators</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: "Lexend Deca", serif;
        }
        #cash-rewards-calculator-section {
            margin: 0 auto;
            display: flex;
            justify-content: center;

            @media screen and (min-width: 768px) {
                padding: 1rem;
            }

            .main-container {
                @media screen and (min-width: 768px) {
                    display: flex;
                    justify-content: space-around;
                    align-items: center;
                    width: 100%;
                    
                }
            }

            .layout {
                @media screen and (min-width: 768px) {
                    max-width: 623px;
                }
            }

            .title {
                font-size: 30px;
                font-weight: 700;
                line-height: 37.5px;
                max-width: 675px;
                padding: 0 1rem;
            }

            .subtitle {
                font-size: 16px;
                font-weight: 400;
                line-height: 24px;
                margin: 1.5rem auto;
                width: 100%;
                max-width: 675px;
                padding: 0 1rem;
            }

            .calculator-container {
                /* Update with dynamic variable */
                max-width: 1280px;
                /* Update with dynamic variable */
                border-radius: 10px;
            }

            .calculator-form {
                display: flex;
                flex-direction: column;
                justify-content: center;
                max-width: 675px;
                /* Update with dynamic variable */
                background: #e6e6e6;
                /* Update with dynamic variable */
                margin: 0 auto;
                padding: 1rem;
                border-radius: 20px;

                @media screen and (min-width: 768px) {
                    background-color: transparent;
                }
            }
            
            .input-container {
                @media screen and (min-width: 768px) {
                    display: flex;
                    align-items: center;
                    justify-content: space-between;
                    width: 100%;
                }
            }

            .input-title-container {
                margin-top: 2rem;
            }

            .input-title {
                /* Update with dynamic variable */
                color: var(--primary-dark-teal, #043436);
                /* Update with dynamic variable */

                font-family: Lexend Deca;
                font-size: 16px;

                /* Update with dynamic variable */
                font-weight: 500;
                /* Update with dynamic variable */

                line-height: 22.4px;
                width: 100%;
                margin-bottom: .6rem;
            }

            .input-subtitle {
                font-size: 12px;
                padding-bottom: 1rem;
                opacity: .6;
            }

            .input {
                display: flex;
                align-items: center;
                border-radius: 50px;


                /* Update with dynamic variable = $borderDefault*/
                border: 1px solid #757575;
                /* Update with dynamic variable */

                /* Update with dynamic variable = --primary-white*/
                background: var(--primary-white, #FFF);
                /* Update with dynamic variable */

                height: 55px;
                width: 100%;
                color: #777777;

                @media screen and (min-width: 768px) {
                    max-width: 175px;
                }

                .dollar-sign {
                    font-size: 14px;
                    max-width: 50px;
                    width: 100%;
                    text-align: center;
                    padding-left: 10px;

                    @media screen and (min-width: 768px) {
                        max-width: 30px;
                    }
                }

                .vertical-line {
                    border-left: 1px solid gray;
                    height: 100%;
                }

                .user-input {
                    border: none;
                    outline: none;
                    background-color: transparent;
                    font-family: inherit;
                    font-size: inherit;
                    padding: 5px 1rem;
                    width: 100%;
                }

                &:focus-within {
                    border-color: #177d78; 
                    box-shadow: 0 0 5px rgba(23, 125, 120, 0.5); 
                }
            }


            .label-input {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                font-size: 12px;
            }


            .answer-container {
                @media screen and (min-width: 768px) {
                    padding: 0 2rem;
                }
            }

            .answer-text-desktop {
                width: 100%;
                font-size: 16px;
                line-height: 24px;
                font-weight: 500;
                display: none;
                max-width: 548px;

                @media screen and (min-width: 768px) {
                    display: block;
                }
            }

            .answer-text-mobile {
                display: flex;
                justify-content: space-between;
                width: 100%;
                font-size: clamp(0.75rem, 0.5695rem + 0.8969vw, 1rem);
                line-height: 16px;
                font-weight: 500;
                padding: 2rem 1rem .5rem 1rem;
                

                @media screen and (min-width: 768px) {
                    display: none;
                }
            }

            .answer-start {
                color: #000000;
                opacity: .6;
            }

            .cash-rewards-calculator-monthly-payment, .cash-rewards-calculator-apr {
                color: #043436;
                font-weight: 700;
                font-size: clamp(1.75rem, -0.1452rem + 8.417vw, 4.375rem);

                line-height: 0px;
                margin-bottom: 3rem;

                margin-top: 20%;
                margin-bottom: 15%;
                @media screen and (min-width: 768px) {
                    font-size: 70px;
                    margin-bottom: 5rem;

                }
            }

            .answer-month {
                color: #043436;
                font-weight: 700;
                font-size: 16px;
                line-height: 0px;

                @media screen and (min-width: 768px) {
                    font-size: 32px;
                }

            }

            .answer-final-text {
                color: #777777;
                font-weight: 400;

                @media screen and (min-width: 768px) {
                    margin: 2rem 0 3rem 0;
                }
            }

            .savings-reset-container {
                display: flex;
                align-items: center;
                cursor: pointer;
                margin: 1rem auto;
                padding: 0 .5rem;

                @media screen and (min-width: 768px) {
                    justify-content: flex-end;
                }

                .button-container {
                    display: flex;
                    align-items: center;
                    justify-content: flex-end;
                }



                .reset-icon {
                    margin-right: .3rem;
                    margin-top: .3rem;
                }

                .reset-button {
                    border: none;
                    outline: none;
                    background-color: transparent;
                    font-size: 14px;
                    color: #043436;
                    font-weight: 500;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    padding: 0 .5rem;
                }

                .reset-button:hover {
                    cursor: pointer;
                    text-decoration: underline;
                }

                .reset-button:focus {
                    text-decoration: underline;
                }
            }

            .horizontal-line-desktop {
                margin-top: 2rem;
                opacity: .6;
                display: none;

                @media screen and (min-width: 768px) {
                    display: block;
                }
            }

            .disclosures-container {
                padding: .5rem;
                @media screen and (min-width: 768px) {
                    background-color: gainsboro;
                    padding: 1rem;
                }

                .disclosures {
                    padding: 0 .5rem;
                    font-size: 12px;
                    line-height: 16px;
                    opacity: .6;
                    width: 100%;

                    @media screen and (min-width: 768px) {
                        max-width: 498px;
                        line-height: 22.4px;

                    }
                }
            }

            .cta-container {
                text-align: center;
                margin: 2rem auto;
                width: 100%;

                @media screen and (min-width: 768px) {
                    margin: 0;
                    height: 15px;
                }

                .cta {
                    border: none;
                    background-color: #b4fff0;
                    border-radius: 50px;
                    width: 150px;
                    height: 45px;
                    color: #043436;
                    font-size: 14px;
                    line-height: 24px;
                    font-weight: 500;

                    @media screen and (min-width: 768px) {
                        position: relative;
                        top: .5rem;

                    }
                }
            }
        }



    </style>
</head>
<body>
    <section id="cash-rewards-calculator-section">
        <div class="main-container">
            <div class="layout">
                <h2 class="title">Calculate Your Personal Loan Payment</h2>
                <p class="subtitle">You could save when you transfer your balance to our Classic Card and enjoy our promotional rate. Since we have no PSECU balance transfer fee or annual fee, the savings stay with you!</p>
                <div class="calculator-container">
                    <div class="calculator-form">
                        <div class="input-container">
                            <div class="input-title">How much do you want to borrow?</div>
                            <div class="input">
                                <div class="dollar-sign">$</div>
                                <div class="vertical-line"></div>
                                <!-- <label for="cash-rewards-calculator-credit-card-balance" class="sr-only">Cash Rewards Calculator Input</label> -->
                                <input class="user-input" type="text" id="cash-rewards-calculator-credit-card-balance" placeholder="Enter amount" value="15000" min="1" step="1000" required />
                            </div>
                        </div>
                        <div class="input-container">
                            <div class="input-title-container">
                                <!-- input field from module below -->
                                <div class="input-title">How long to pay it off?</div>
                                <!-- input field from module above-->
                            </div>
                            <select
                                id="personal-loan-term-length"
                                name="personal-loan-term-length"
                                class="personal-loan-term-length"
                            >
                                <option value="12" data-apr="12">12 months</option>
                                <option value="24" data-apr="24">24 months</option>
                                <option value="36" data-apr="36">36 months</option>
                                <option value="48" data-apr="48">48 months</option>
                                <option value="60" data-apr="60">60 months</option>
                                <option value="72" data-apr="72">72 months</option>
                                <option value="84" data-apr="84">84 months</option>
                          </select>
                        </div>
                        <div class="answer-text-mobile">
                            <div class="answer-container">
                                <p class="answer-start-monthy-payment">Monthly Payment</p>
                                <p class="cash-rewards-calculator-monthly-payment">$53,380.13</p>
                            </div>
                            <div class="answer-container">
                                <p class="answer-start-apr">APR</p>
                                <p class="cash-rewards-calculator-apr">60.74%</p>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="horizontal-line-desktop" />
                <div class="savings-reset-container">
                    <div class="button-container">
                        <button class="reset-button">
                            <span class="reset-icon"><svg width="15" height="15" viewBox="0 0 20 19" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M17.7344 10.7891C18.2422 10.9453 18.5156 11.4531 18.3594 11.9609C17.2656 15.6719 13.8281 18.25 9.96094 18.25C6.875 18.25 4.02344 16.5703 2.46094 13.9531V17.9375C2.46094 18.4844 2.07031 18.875 1.52344 18.875C1.01562 18.875 0.585938 18.4844 0.585938 17.9375V11.6875C0.585938 11.1797 1.01562 10.75 1.52344 10.75H7.77344C8.32031 10.75 8.71094 11.1797 8.71094 11.6875C8.71094 12.2344 8.28125 12.625 7.77344 12.625H3.82812C5 14.8906 7.34375 16.375 9.96094 16.375C13.0078 16.375 15.7422 14.3438 16.5625 11.4141C16.7188 10.9062 17.2266 10.6328 17.7344 10.7891ZM18.4375 0.125C18.9453 0.125 19.375 0.554688 19.375 1.0625V7.3125C19.375 7.85938 18.9453 8.25 18.4375 8.25H12.1875C11.6406 8.25 11.25 7.85938 11.25 7.3125C11.25 6.80469 11.6406 6.375 12.1875 6.375H16.0938C14.9219 4.14844 12.5781 2.625 10 2.625C6.95312 2.625 4.21875 4.69531 3.35938 7.58594C3.24219 8.09375 2.73438 8.36719 2.22656 8.21094C1.71875 8.09375 1.44531 7.54688 1.5625 7.07812C2.65625 3.36719 6.13281 0.75 10 0.75C13.0859 0.75 15.9375 2.46875 17.5 5.08594V1.0625C17.5 0.554688 17.8906 0.125 18.4375 0.125Z"
                                        fill="#757575" />
                                </svg>
                            </span>
                            Start Over
                        </button>
                    </div>
                </div>
            </div>
            <div class="answer-container">
                <div class="answer-text-desktop">
                    <p class="answer-start">You could save an average of</p>
                    <p class="cash-rewards-calculator-monthly-payment">$53,380.13</p>
                </div>
                <div class="disclosures-container">
                    <p class="disclosures">For informational purposes only. Rate assumes excellent creditworthiness; your rate may differ from the rate(s) down below. Actual terms will vary. See below for important details.</p>
                    <div class="cta-container">
                        <button class="cta">Apply Today</button>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <script>
        const savingsCalculatorCreditCardBalance = document.getElementById('cash-rewards-calculator-credit-card-balance');
        const savingsCalculatorPercentInput = document.getElementById('cash-rewards-calculator-percent-amount');
        const savingsCalculatorAnswer = document.querySelectorAll('.cash-rewards-calculator-monthly-payment');
        const savingsCalculatorResetButton = document.querySelector('.savings-reset-container');

        // Setting original values
        const originalSavingsCalculatorBalanceValue = savingsCalculatorCreditCardBalance.value;
        const originalSavingsCalculatorPercentValue = savingsCalculatorPercentInput.value;

        // Max values for inputs
        const maxSavingsCalculatorBalanceValue = 300000;
        const maxSavingsCalculatorPercentValue = 30;

        // Variables for savingsAverageCalculation
        const savingsCalculatorPromoRate = 4.90;
        let savingsCalculatorBalanceAmount = originalSavingsCalculatorBalanceValue;
        let savingsCalculatorPercentageAmount = originalSavingsCalculatorPercentValue;

        // Setting max values for inputs
        // Adding commas to inputs
        const enforceSavingsCalculatorNumericInput = (input, maxValue) => {
            input.addEventListener('input', function () {
                const cursorPosition = input.selectionStart;
                 // Remove commas
                let numericValue = input.value.replace(/,/g, '');
                // Remove non-digit characters
                numericValue = numericValue.replace(/\D/g, ''); 

                // Enforce maximum value
                if (numericValue && parseInt(numericValue, 10) > maxValue) {
                    numericValue = maxValue.toString();
                }

                // Format value with commas
                input.value = numericValue ? parseInt(numericValue, 10).toLocaleString() : '';
                // Preserve cursor position
                input.setSelectionRange(cursorPosition, cursorPosition); 
            });
        };

        enforceSavingsCalculatorNumericInput(savingsCalculatorCreditCardBalance, maxSavingsCalculatorBalanceValue);
        enforceSavingsCalculatorNumericInput(savingsCalculatorPercentInput, maxSavingsCalculatorPercentValue);

        const removeCommaFromInputCalculator = (value) => parseInt(value.replace(/,/g, ""), 10) || 0;

        const savingsAverageCalculation = (cashValue, percentValue, currentsavingsCalculatorPromoRate) => {
            const numericCash = removeCommaFromInputCalculator(cashValue);
            const savingsCalculatorPromoRateDecimal = currentsavingsCalculatorPromoRate / 100;
            const percentDecimal = percentValue / 100;
            const monthlyDifference = (percentDecimal - savingsCalculatorPromoRateDecimal) / 12;
            return (numericCash * monthlyDifference).toFixed(2);
        };

        const updateSavingsCalculatorAnswer = () => {
            savingsCalculatorAnswer.forEach(ans => {
                ans.textContent = `$${parseFloat(savingsAverageCalculation(savingsCalculatorBalanceAmount, savingsCalculatorPercentageAmount, savingsCalculatorPromoRate), 10).toLocaleString()}`;
            });
        };

        savingsCalculatorCreditCardBalance.addEventListener('input', () => {
            savingsCalculatorBalanceAmount = savingsCalculatorCreditCardBalance.value;
            updateSavingsCalculatorAnswer();
        });


        savingsCalculatorPercentInput.addEventListener('input', () => {
            savingsCalculatorPercentageAmount = savingsCalculatorPercentInput.value;
            updateSavingsCalculatorAnswer();
        });


        savingsCalculatorResetButton.addEventListener('click', () => {
            savingsCalculatorCreditCardBalance.value = originalSavingsCalculatorBalanceValue;
            savingsCalculatorPercentInput.value = originalSavingsCalculatorPercentValue;
            savingsCalculatorBalanceAmount = originalSavingsCalculatorBalanceValue;
            savingsCalculatorPercentageAmount = originalSavingsCalculatorPercentValue;
            updateSavingsCalculatorAnswer();
        });

        updateSavingsCalculatorAnswer();


        document.addEventListener('DOMContentLoaded', () => {
            savingsCalculatorCreditCardBalance.value = parseInt(savingsCalculatorCreditCardBalance.value || 0, 10).toLocaleString(); // Format with commas
            savingsCalculatorPercentInput.value = parseInt(savingsCalculatorPercentInput.value || 0, 10).toLocaleString(); // Format if necessary
            savingsCalculatorAnswer.forEach(ans => {
                ans.textContent = `$${insertCommaIntoInputCalculator(savingsAverageCalculation(savingsCalculatorBalanceAmount, savingsCalculatorPercentageAmount, savingsCalculatorPromoRate))}`;
            });
        });

    </script>
</body>
</html>